<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 1 Data Wrangling with R | Linear Methods for Data Science Notes</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 1 Data Wrangling with R | Linear Methods for Data Science Notes" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 1 Data Wrangling with R | Linear Methods for Data Science Notes" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="John Michael Epperson" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="syllabus-week.html"/>
<link rel="next" href="data-visualization-with-r-using-ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Linear Models for Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="syllabus-week.html"><a href="syllabus-week.html"><i class="fa fa-check"></i>Syllabus Week</a>
<ul>
<li class="chapter" data-level="0.1" data-path="syllabus-week.html"><a href="syllabus-week.html#agenda"><i class="fa fa-check"></i><b>0.1</b> Agenda</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html"><i class="fa fa-check"></i><b>1</b> Data Wrangling with R</a>
<ul>
<li class="chapter" data-level="" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#cheat-sheet"><i class="fa fa-check"></i>Cheat Sheet</a></li>
<li class="chapter" data-level="1.1" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#data-wrangling-using-base-r-functions"><i class="fa fa-check"></i><b>1.1</b> Data Wrangling Using Base R Functions</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#changing-column-names"><i class="fa fa-check"></i><b>1.1.1</b> Changing Column Names</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#summarizing-variables"><i class="fa fa-check"></i><b>1.1.2</b> <strong>Summarizing Variables</strong></a></li>
<li class="chapter" data-level="1.1.3" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#summarizing-variable-by-groups"><i class="fa fa-check"></i><b>1.1.3</b> <strong>Summarizing variable by groups</strong></a></li>
<li class="chapter" data-level="1.1.4" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#create-a-new-variable-based-on-existing-variable"><i class="fa fa-check"></i><b>1.1.4</b> <strong>Create a new variable based on existing variable</strong></a></li>
<li class="chapter" data-level="1.1.5" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#combine-data-frames"><i class="fa fa-check"></i><b>1.1.5</b> <strong>Combine data frames</strong></a></li>
<li class="chapter" data-level="1.1.6" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#sort-data-frame-by-column-values"><i class="fa fa-check"></i><b>1.1.6</b> <strong>Sort data frame by column values</strong></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#data-wrangling-using-dplyr-functions"><i class="fa fa-check"></i><b>1.2</b> Data Wrangling Using dplyr Functions</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#select-specific-columns-of-a-data-fram"><i class="fa fa-check"></i><b>1.2.1</b> Select Specific Columns of a Data Fram</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#select-observations-by-conditions"><i class="fa fa-check"></i><b>1.2.2</b> Select observations by conditions</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#change-column-name"><i class="fa fa-check"></i><b>1.2.3</b> Change Column Name</a></li>
<li class="chapter" data-level="1.2.4" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#summarizing-variables-1"><i class="fa fa-check"></i><b>1.2.4</b> Summarizing Variables</a></li>
<li class="chapter" data-level="1.2.5" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#summarizing-variable-by-groups-1"><i class="fa fa-check"></i><b>1.2.5</b> Summarizing Variable by Groups</a></li>
<li class="chapter" data-level="1.2.6" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#create-a-new-variable-based-on-existing-variables"><i class="fa fa-check"></i><b>1.2.6</b> Create a New Variable Based on Existing Variable(s)</a></li>
<li class="chapter" data-level="1.2.7" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#combine-data-frames-1"><i class="fa fa-check"></i><b>1.2.7</b> Combine Data Frames</a></li>
<li class="chapter" data-level="1.2.8" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#sort-data-frame-by-column-values-1"><i class="fa fa-check"></i><b>1.2.8</b> Sort data frame by column values</a></li>
<li class="chapter" data-level="1.2.9" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#more-about-combining-datasets"><i class="fa fa-check"></i><b>1.2.9</b> More About Combining Datasets</a></li>
<li class="chapter" data-level="1.2.10" data-path="data-wrangling-with-r.html"><a href="data-wrangling-with-r.html#a-note-about-missing-values"><i class="fa fa-check"></i><b>1.2.10</b> A Note About Missing Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html"><i class="fa fa-check"></i><b>2</b> Data Visualization with R Using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#visualizations-with-a-single-categorical-variable"><i class="fa fa-check"></i><b>2.2</b> Visualizations with a Single Categorical Variable</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#frequency-tables"><i class="fa fa-check"></i><b>2.2.1</b> Frequency Tables</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#bar-charts"><i class="fa fa-check"></i><b>2.2.2</b> Bar Charts</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#visualizations-with-a-single-quantitative-variable"><i class="fa fa-check"></i><b>2.3</b> Visualizations with a Single Quantitative Variable</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#number-summary"><i class="fa fa-check"></i><b>2.3.1</b> 5 Number Summary</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#boxplots"><i class="fa fa-check"></i><b>2.3.2</b> Boxplots</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#histograms"><i class="fa fa-check"></i><b>2.3.3</b> Histograms</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#density-plots"><i class="fa fa-check"></i><b>2.3.4</b> Density Plots</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#bivariate-visualizations"><i class="fa fa-check"></i><b>2.4</b> Bivariate Visualizations</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#compare-quantitative-variable-across-categories"><i class="fa fa-check"></i><b>2.4.1</b> Compare Quantitative Variable Across Categories</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#summarizing-two-categorical-variables"><i class="fa fa-check"></i><b>2.4.2</b> Summarizing Two Categorical Variables</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#summarizing-two-quantitative-variables"><i class="fa fa-check"></i><b>2.4.3</b> Summarizing Two Quantitative Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#multivariate-visualizations"><i class="fa fa-check"></i><b>2.5</b> Multivariate Visualizations</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#bar-charts-1"><i class="fa fa-check"></i><b>2.5.1</b> Bar Charts</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-visualization-with-r-using-ggplot2.html"><a href="data-visualization-with-r-using-ggplot2.html#scatterplots-1"><i class="fa fa-check"></i><b>2.5.2</b> Scatterplots</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html"><i class="fa fa-check"></i><b>A</b> Review of Statistical Inference</a>
<ul>
<li class="chapter" data-level="" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#cheat-sheet-1"><i class="fa fa-check"></i>Cheat Sheet</a></li>
<li class="chapter" data-level="A.1" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#introduction-to-the-lesson"><i class="fa fa-check"></i><b>A.1</b> Introduction to the Lesson</a></li>
<li class="chapter" data-level="A.2" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#sampling-distributions"><i class="fa fa-check"></i><b>A.2</b> Sampling Distributions</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#normal-distribution"><i class="fa fa-check"></i><b>A.2.1</b> Normal Distribution</a></li>
<li class="chapter" data-level="A.2.2" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#population-samples"><i class="fa fa-check"></i><b>A.2.2</b> Population &amp; Samples</a></li>
<li class="chapter" data-level="A.2.3" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#sampling-distribution-of-sample-means"><i class="fa fa-check"></i><b>A.2.3</b> Sampling Distribution of Sample Means</a></li>
<li class="chapter" data-level="A.2.4" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#worked-example-textbook-spending"><i class="fa fa-check"></i><b>A.2.4</b> Worked Example: Textbook Spending</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#confidence-intervals"><i class="fa fa-check"></i><b>A.3</b> Confidence Intervals</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#intro-to-confidence-intervals"><i class="fa fa-check"></i><b>A.3.1</b> Intro to Confidence Intervals</a></li>
<li class="chapter" data-level="A.3.2" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#finding-multipliers"><i class="fa fa-check"></i><b>A.3.2</b> Finding Multipliers</a></li>
<li class="chapter" data-level="A.3.3" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#t-distributions"><i class="fa fa-check"></i><b>A.3.3</b> t distributions</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#hypothesis-testing"><i class="fa fa-check"></i><b>A.4</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#hypotheses"><i class="fa fa-check"></i><b>A.4.1</b> Hypotheses</a></li>
<li class="chapter" data-level="A.4.2" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#evaluating-evidence-p-values"><i class="fa fa-check"></i><b>A.4.2</b> Evaluating Evidence: p-values</a></li>
<li class="chapter" data-level="A.4.3" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#evaluating-evidence-critical-value-approach"><i class="fa fa-check"></i><b>A.4.3</b> Evaluating Evidence: Critical Value Approach</a></li>
<li class="chapter" data-level="A.4.4" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#summary"><i class="fa fa-check"></i><b>A.4.4</b> Summary</a></li>
<li class="chapter" data-level="A.4.5" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#worked-examples"><i class="fa fa-check"></i><b>A.4.5</b> Worked Examples</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#practice-questions"><i class="fa fa-check"></i><b>A.5</b> Practice Questions</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#sampling-distributions-1"><i class="fa fa-check"></i><b>A.5.1</b> Sampling Distributions</a></li>
<li class="chapter" data-level="A.5.2" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#confidence-intervals-1"><i class="fa fa-check"></i><b>A.5.2</b> Confidence Intervals</a></li>
<li class="chapter" data-level="A.5.3" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>A.5.3</b> Hypothesis Testing</a></li>
<li class="chapter" data-level="A.5.4" data-path="review-of-statistical-inference.html"><a href="review-of-statistical-inference.html#general-questions"><i class="fa fa-check"></i><b>A.5.4</b> General Questions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="basics-of-r.html"><a href="basics-of-r.html"><i class="fa fa-check"></i><b>B</b> Basics of R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="basics-of-r.html"><a href="basics-of-r.html#getting-started-with-r"><i class="fa fa-check"></i><b>B.1</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="basics-of-r.html"><a href="basics-of-r.html#question-1"><i class="fa fa-check"></i><b>B.1.1</b> Question 1</a></li>
<li class="chapter" data-level="B.1.2" data-path="basics-of-r.html"><a href="basics-of-r.html#question-2"><i class="fa fa-check"></i><b>B.1.2</b> Question 2</a></li>
<li class="chapter" data-level="B.1.3" data-path="basics-of-r.html"><a href="basics-of-r.html#question-3"><i class="fa fa-check"></i><b>B.1.3</b> Question 3</a></li>
<li class="chapter" data-level="B.1.4" data-path="basics-of-r.html"><a href="basics-of-r.html#question-4"><i class="fa fa-check"></i><b>B.1.4</b> Question 4</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="basics-of-r.html"><a href="basics-of-r.html#topic-b.3-data-types-structures-in-r"><i class="fa fa-check"></i><b>B.2</b> Topic B.3: Data Types &amp; Structures in R</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="basics-of-r.html"><a href="basics-of-r.html#question-5"><i class="fa fa-check"></i><b>B.2.1</b> Question 5</a></li>
<li class="chapter" data-level="B.2.2" data-path="basics-of-r.html"><a href="basics-of-r.html#question-6"><i class="fa fa-check"></i><b>B.2.2</b> Question 6</a></li>
<li class="chapter" data-level="B.2.3" data-path="basics-of-r.html"><a href="basics-of-r.html#question-7"><i class="fa fa-check"></i><b>B.2.3</b> Question 7</a></li>
<li class="chapter" data-level="B.2.4" data-path="basics-of-r.html"><a href="basics-of-r.html#question-8"><i class="fa fa-check"></i><b>B.2.4</b> Question 8</a></li>
<li class="chapter" data-level="B.2.5" data-path="basics-of-r.html"><a href="basics-of-r.html#question-9"><i class="fa fa-check"></i><b>B.2.5</b> Question 9</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="basics-of-r.html"><a href="basics-of-r.html#r-markdown"><i class="fa fa-check"></i><b>B.3</b> R Markdown</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="basics-of-r.html"><a href="basics-of-r.html#question-10"><i class="fa fa-check"></i><b>B.3.1</b> Question 10</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Linear Methods for Data Science Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling-with-r" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Module 1</span> Data Wrangling with R<a href="data-wrangling-with-r.html#data-wrangling-with-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="cheat-sheet" class="section level2 unnumbered hasAnchor">
<h2>Cheat Sheet<a href="data-wrangling-with-r.html#cheat-sheet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>pipes “%&gt;%” are interpreted as ‘and then’ in code
<ul>
<li>can be typed or accessed by Ctrl+Alt+M</li>
</ul></li>
</ul>
</div>
<div id="data-wrangling-using-base-r-functions" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Data Wrangling Using Base R Functions<a href="data-wrangling-with-r.html#data-wrangling-using-base-r-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-wrangling-with-r.html#cb1-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;datasets/ClassDataPrevious.csv&quot;</span>,<span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-2"><a href="data-wrangling-with-r.html#cb1-2" tabindex="-1"></a><span class="fu">dim</span>(Data)</span></code></pre></div>
<pre><code>## [1] 298   8</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-wrangling-with-r.html#cb3-1" tabindex="-1"></a><span class="fu">colnames</span>(Data)</span></code></pre></div>
<pre><code>## [1] &quot;Year&quot;     &quot;Sleep&quot;    &quot;Sport&quot;    &quot;Courses&quot;  &quot;Major&quot;    &quot;Age&quot;      &quot;Computer&quot;
## [8] &quot;Lunch&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-wrangling-with-r.html#cb5-1" tabindex="-1"></a>Data[<span class="dv">1</span>,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-wrangling-with-r.html#cb7-1" tabindex="-1"></a>Data[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">8</span>)]</span></code></pre></div>
<pre><code>##     Year                            Major Lunch
## 1 Second                         Commerce    11
## 3 Second Cognitive science and psychology    10
## 4  First                         Pre-Comm     4</code></pre>
<p>To view a column</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-wrangling-with-r.html#cb9-1" tabindex="-1"></a>Data<span class="sc">$</span>Year</span>
<span id="cb9-2"><a href="data-wrangling-with-r.html#cb9-2" tabindex="-1"></a>Data[,<span class="dv">1</span>]</span>
<span id="cb9-3"><a href="data-wrangling-with-r.html#cb9-3" tabindex="-1"></a>Data[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>)]</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-wrangling-with-r.html#cb10-1" tabindex="-1"></a><span class="fu">which</span>(Data<span class="sc">$</span>Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span>)</span></code></pre></div>
<pre><code>##  [1]   3  20  25  26  31  32  33  38  44  46  48  50  51  64  67  71  87  92  98
## [20]  99 118 122 124 126 128 133 136 137 143 146 153 159 165 174 197 198 207 211
## [39] 214 226 234 241 255 259 260 266 274 278 281 283 294 295</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-wrangling-with-r.html#cb12-1" tabindex="-1"></a>SoccerPeeps<span class="ot">&lt;-</span>Data[<span class="fu">which</span>(Data<span class="sc">$</span>Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span>),]</span>
<span id="cb12-2"><a href="data-wrangling-with-r.html#cb12-2" tabindex="-1"></a><span class="fu">dim</span>(SoccerPeeps)</span></code></pre></div>
<pre><code>## [1] 52  8</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-wrangling-with-r.html#cb14-1" tabindex="-1"></a>SoccerPeeps_2nd<span class="ot">&lt;-</span>Data[<span class="fu">which</span>(Data<span class="sc">$</span>Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span> <span class="sc">&amp;</span> Data<span class="sc">$</span>Year<span class="sc">==</span><span class="st">&quot;Second&quot;</span>),]</span>
<span id="cb14-2"><a href="data-wrangling-with-r.html#cb14-2" tabindex="-1"></a><span class="fu">dim</span>(SoccerPeeps_2nd)</span></code></pre></div>
<pre><code>## [1] 25  8</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-wrangling-with-r.html#cb16-1" tabindex="-1"></a>Sleepy<span class="ot">&lt;-</span>Data[<span class="fu">which</span>(Data<span class="sc">$</span>Sleep<span class="sc">&gt;</span><span class="dv">8</span>),]</span></code></pre></div>
<div id="changing-column-names" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Changing Column Names<a href="data-wrangling-with-r.html#changing-column-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-wrangling-with-r.html#cb17-1" tabindex="-1"></a><span class="fu">names</span>(Data)[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">7</span>)]<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Yr&quot;</span>,<span class="st">&quot;Computer&quot;</span>)</span></code></pre></div>
<p>Find and remove missing data</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-wrangling-with-r.html#cb18-1" tabindex="-1"></a><span class="fu">is.na</span>(Data)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-wrangling-with-r.html#cb19-1" tabindex="-1"></a>Data[<span class="sc">!</span><span class="fu">complete.cases</span>(Data),]</span></code></pre></div>
<pre><code>##         Yr Sleep      Sport Courses                                      Major
## 103 Second    NA Basketball       7 psychology and youth and social innovation
## 206 Second     8       None       4                          Cognitive Science
##     Age Computer Lunch
## 103  19      Mac    10
## 206  19      Mac    NA</code></pre>
</div>
<div id="summarizing-variables" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> <strong>Summarizing Variables</strong><a href="data-wrangling-with-r.html#summarizing-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-wrangling-with-r.html#cb21-1" tabindex="-1"></a><span class="fu">apply</span>(Data[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)],<span class="dv">2</span>,mean)</span></code></pre></div>
<pre><code>##     Sleep   Courses       Age     Lunch 
##        NA  5.016779 19.573826        NA</code></pre>
<p>To not include missing values, use arg na.rm</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-wrangling-with-r.html#cb23-1" tabindex="-1"></a><span class="fu">apply</span>(Data[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)],<span class="dv">2</span>,mean,<span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>##      Sleep    Courses        Age      Lunch 
## 155.559259   5.016779  19.573826 156.594175</code></pre>
<p>In apply(), the second argument specifies whether to summarize row (put 1) or column (put 2) values</p>
<p>Since some of the means are very high, we can use the median instead to be a little more informative.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-wrangling-with-r.html#cb25-1" tabindex="-1"></a><span class="fu">apply</span>(Data[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>)],<span class="dv">2</span>,median,<span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>##   Sleep Courses     Age   Lunch 
##     7.5     5.0    19.0     9.0</code></pre>
</div>
<div id="summarizing-variable-by-groups" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> <strong>Summarizing variable by groups</strong><a href="data-wrangling-with-r.html#summarizing-variable-by-groups" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>use tapply()</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-wrangling-with-r.html#cb27-1" tabindex="-1"></a><span class="fu">tapply</span>(Data<span class="sc">$</span>Sleep,Data<span class="sc">$</span>Yr,median,<span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>##  First Fourth Second  Third 
##    8.0    7.0    7.5    7.0</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-wrangling-with-r.html#cb29-1" tabindex="-1"></a>Data<span class="sc">$</span>Yr<span class="ot">&lt;-</span><span class="fu">factor</span>(Data<span class="sc">$</span>Yr,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;First&quot;</span>,<span class="st">&quot;Second&quot;</span>,<span class="st">&quot;Third&quot;</span>,<span class="st">&quot;Fourth&quot;</span>))</span>
<span id="cb29-2"><a href="data-wrangling-with-r.html#cb29-2" tabindex="-1"></a><span class="fu">levels</span>(Data<span class="sc">$</span>Yr)</span></code></pre></div>
<pre><code>## [1] &quot;First&quot;  &quot;Second&quot; &quot;Third&quot;  &quot;Fourth&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-wrangling-with-r.html#cb31-1" tabindex="-1"></a><span class="fu">tapply</span>(Data<span class="sc">$</span>Sleep,Data<span class="sc">$</span>Yr,median,<span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>##  First Second  Third Fourth 
##    8.0    7.5    7.0    7.0</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-wrangling-with-r.html#cb33-1" tabindex="-1"></a><span class="fu">tapply</span>(Data<span class="sc">$</span>Sleep,<span class="fu">list</span>(Data<span class="sc">$</span>Yr,Data<span class="sc">$</span>Computer),median,<span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>##           Mac   PC
## First  NA 8.0 7.50
## Second  7 7.5 7.50
## Third  NA 7.5 7.00
## Fourth NA 7.0 7.25</code></pre>
</div>
<div id="create-a-new-variable-based-on-existing-variable" class="section level3 hasAnchor" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> <strong>Create a new variable based on existing variable</strong><a href="data-wrangling-with-r.html#create-a-new-variable-based-on-existing-variable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-wrangling-with-r.html#cb35-1" tabindex="-1"></a>sleep_mins<span class="ot">&lt;-</span>Data<span class="sc">$</span>Sleep<span class="sc">*</span><span class="dv">60</span></span>
<span id="cb35-2"><a href="data-wrangling-with-r.html#cb35-2" tabindex="-1"></a>deprived<span class="ot">&lt;-</span><span class="fu">ifelse</span>(Data<span class="sc">$</span>Sleep<span class="sc">&lt;</span><span class="dv">7</span>,<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<p>Create catagorical variable based on numerical value</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-wrangling-with-r.html#cb36-1" tabindex="-1"></a>CourseLoad<span class="ot">&lt;-</span><span class="fu">cut</span>(Data<span class="sc">$</span>Courses,<span class="at">breaks=</span><span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="cn">Inf</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;light&quot;</span>,<span class="st">&quot;regular&quot;</span>,<span class="st">&quot;heavy&quot;</span>))</span></code></pre></div>
<p>Collapse levels
into upperclassmen and lowerclassmen</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-wrangling-with-r.html#cb37-1" tabindex="-1"></a><span class="fu">levels</span>(Data<span class="sc">$</span>Yr)</span></code></pre></div>
<pre><code>## [1] &quot;First&quot;  &quot;Second&quot; &quot;Third&quot;  &quot;Fourth&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-wrangling-with-r.html#cb39-1" tabindex="-1"></a>new.levels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;und&quot;</span>,<span class="st">&quot;und&quot;</span>,<span class="st">&quot;up&quot;</span>,<span class="st">&quot;up&quot;</span>)</span>
<span id="cb39-2"><a href="data-wrangling-with-r.html#cb39-2" tabindex="-1"></a>Year2<span class="ot">&lt;-</span><span class="fu">factor</span>(new.levels[Data<span class="sc">$</span>Yr])</span>
<span id="cb39-3"><a href="data-wrangling-with-r.html#cb39-3" tabindex="-1"></a><span class="fu">levels</span>(Year2)</span></code></pre></div>
<pre><code>## [1] &quot;und&quot; &quot;up&quot;</code></pre>
</div>
<div id="combine-data-frames" class="section level3 hasAnchor" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> <strong>Combine data frames</strong><a href="data-wrangling-with-r.html#combine-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-wrangling-with-r.html#cb41-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span><span class="fu">data.frame</span>(Data,sleep_mins,deprived,CourseLoad,Year2)</span>
<span id="cb41-2"><a href="data-wrangling-with-r.html#cb41-2" tabindex="-1"></a><span class="fu">head</span>(Data)</span></code></pre></div>
<pre><code>##       Yr Sleep      Sport Courses                            Major Age Computer
## 1 Second     8 Basketball       6                         Commerce  19      Mac
## 2 Second     7     Tennis       5                       Psychology  19      Mac
## 3 Second     8     Soccer       5 Cognitive science and psychology  21      Mac
## 4  First     9 Basketball       5                         Pre-Comm  19      Mac
## 5 Second     4 Basketball       6                      Statistics   19       PC
## 6  Third     7       None       4                       Psychology  20       PC
##   Lunch sleep_mins deprived CourseLoad Year2
## 1    11        480       no      heavy   und
## 2    10        420       no    regular   und
## 3    10        480       no    regular   und
## 4     4        540       no    regular   und
## 5     0        240      yes      heavy   und
## 6    11        420       no    regular    up</code></pre>
<p>Can use cbind() alternatively for same result</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-wrangling-with-r.html#cb43-1" tabindex="-1"></a>Data2<span class="ot">&lt;-</span><span class="fu">cbind</span>(Data,sleep_mins,deprived,CourseLoad,Year2)</span></code></pre></div>
<p>When combining data frames which have different observations but the same columns, we can merge them using rbind()</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-wrangling-with-r.html#cb44-1" tabindex="-1"></a>dat1<span class="ot">&lt;-</span>Data[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb44-2"><a href="data-wrangling-with-r.html#cb44-2" tabindex="-1"></a>dat3<span class="ot">&lt;-</span>Data[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb44-3"><a href="data-wrangling-with-r.html#cb44-3" tabindex="-1"></a>res.dat2<span class="ot">&lt;-</span><span class="fu">rbind</span>(dat1,dat3)</span>
<span id="cb44-4"><a href="data-wrangling-with-r.html#cb44-4" tabindex="-1"></a><span class="fu">head</span>(res.dat2)</span></code></pre></div>
<pre><code>##       Yr Sleep      Sport
## 1 Second     8 Basketball
## 2 Second     7     Tennis
## 3 Second     8     Soccer
## 6  Third     7       None
## 7 Second     7 Basketball
## 8  First     7 Basketball</code></pre>
<p>**Export data frame to csv</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-wrangling-with-r.html#cb46-1" tabindex="-1"></a><span class="fu">write.csv</span>(Data,<span class="at">file=</span><span class="st">&quot;exports/newdata.csv&quot;</span>,<span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="sort-data-frame-by-column-values" class="section level3 hasAnchor" number="1.1.6">
<h3><span class="header-section-number">1.1.6</span> <strong>Sort data frame by column values</strong><a href="data-wrangling-with-r.html#sort-data-frame-by-column-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>to sort in ascending order by age, then descending</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-wrangling-with-r.html#cb47-1" tabindex="-1"></a>Data_by_age<span class="ot">&lt;-</span>Data[<span class="fu">order</span>(Data<span class="sc">$</span>Age),]</span>
<span id="cb47-2"><a href="data-wrangling-with-r.html#cb47-2" tabindex="-1"></a>Data_by_age_des<span class="ot">&lt;-</span>Data[<span class="fu">order</span>(<span class="sc">-</span>Data<span class="sc">$</span>Age),]</span></code></pre></div>
<p>To sort ascending by age then by sleep:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-wrangling-with-r.html#cb48-1" tabindex="-1"></a>Data_by_age_sleep<span class="ot">&lt;-</span>Data[<span class="fu">order</span>(Data<span class="sc">$</span>Age, Data<span class="sc">$</span>Sleep),]</span></code></pre></div>
<hr />
</div>
</div>
<div id="data-wrangling-using-dplyr-functions" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Data Wrangling Using dplyr Functions<a href="data-wrangling-with-r.html#data-wrangling-using-dplyr-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First we’ll clear our environment using rm(list=ls()), then load tidyverse, which contains the dplyr functions:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-wrangling-with-r.html#cb49-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb49-2"><a href="data-wrangling-with-r.html#cb49-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ───────
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.2     
## ── Conflicts ────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-wrangling-with-r.html#cb51-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;datasets/ClassDataPrevious.csv&quot;</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div id="select-specific-columns-of-a-data-fram" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Select Specific Columns of a Data Fram<a href="data-wrangling-with-r.html#select-specific-columns-of-a-data-fram" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>use select() function, two ways to do it</p>
<p>Or use <strong>Pipes</strong></p>
<p>Pipes can be typed using either %&gt;% or Ctrl+Shift+M on keyboard. To thing of the operations above, we can read the code as:</p>
<ol style="list-style-type: decimal">
<li>Take the data frame called Data</li>
<li>and then select the column named Year</li>
</ol>
<p>In this way, we can interpret a pipe as “and then”. Commands after pipe should be placed on a new line. Pipes are especially useful for lots of sequential commands.</p>
</div>
<div id="select-observations-by-conditions" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Select observations by conditions<a href="data-wrangling-with-r.html#select-observations-by-conditions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <strong>filter()</strong> function allows us to subset our data based on some conditions, for example, to select students whose favorite sport is soccer:</p>
<p>or use a pipe to store results in a new variable “SoccerPeeps”</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-wrangling-with-r.html#cb52-1" tabindex="-1"></a>SoccerPeeps<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="data-wrangling-with-r.html#cb52-2" tabindex="-1"></a>  <span class="fu">filter</span>(Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span>)</span>
<span id="cb52-3"><a href="data-wrangling-with-r.html#cb52-3" tabindex="-1"></a></span>
<span id="cb52-4"><a href="data-wrangling-with-r.html#cb52-4" tabindex="-1"></a>SoccerPeeps_2nd<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb52-5"><a href="data-wrangling-with-r.html#cb52-5" tabindex="-1"></a>  <span class="fu">filter</span>(Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span> <span class="sc">&amp;</span> Year<span class="sc">==</span><span class="st">&quot;Second&quot;</span>)</span>
<span id="cb52-6"><a href="data-wrangling-with-r.html#cb52-6" tabindex="-1"></a></span>
<span id="cb52-7"><a href="data-wrangling-with-r.html#cb52-7" tabindex="-1"></a>Sleepy<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb52-8"><a href="data-wrangling-with-r.html#cb52-8" tabindex="-1"></a>  <span class="fu">filter</span>(Sleep<span class="sc">&gt;</span><span class="dv">8</span>)</span>
<span id="cb52-9"><a href="data-wrangling-with-r.html#cb52-9" tabindex="-1"></a></span>
<span id="cb52-10"><a href="data-wrangling-with-r.html#cb52-10" tabindex="-1"></a>Sleepy_or_Soccer<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb52-11"><a href="data-wrangling-with-r.html#cb52-11" tabindex="-1"></a>  <span class="fu">filter</span>(Sport<span class="sc">==</span><span class="st">&quot;Soccer&quot;</span><span class="sc">|</span>Sleep<span class="sc">&gt;</span><span class="dv">8</span>)</span></code></pre></div>
</div>
<div id="change-column-name" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Change Column Name<a href="data-wrangling-with-r.html#change-column-name" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Changing the names of columns is easy with dplyr, use rename() function</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-wrangling-with-r.html#cb53-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="data-wrangling-with-r.html#cb53-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Yr=</span>Year,<span class="at">Comp=</span>Computer)</span></code></pre></div>
</div>
<div id="summarizing-variables-1" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Summarizing Variables<a href="data-wrangling-with-r.html#summarizing-variables-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The summarize() function allows us to summarize a column. Suppose we want to find the mean value of the numeric columns: Sleep, Courses, Age, Lunch:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-wrangling-with-r.html#cb54-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="data-wrangling-with-r.html#cb54-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(Sleep,<span class="at">na.rm=</span>T),<span class="fu">mean</span>(Courses),<span class="fu">mean</span>(Age),<span class="fu">mean</span>(Lunch,<span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>##   mean(Sleep, na.rm = T) mean(Courses) mean(Age) mean(Lunch, na.rm = T)
## 1               155.5593      5.016779  19.57383               156.5942</code></pre>
<p>This output is cumbersome, but we can give names to each summary:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-wrangling-with-r.html#cb56-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="data-wrangling-with-r.html#cb56-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avgSleep=</span><span class="fu">mean</span>(Sleep,<span class="at">na.rm =</span> T),<span class="at">avgCourse=</span><span class="fu">mean</span>(Courses,<span class="at">na.rm =</span> T),<span class="at">avgAge=</span><span class="fu">mean</span>(Age,<span class="at">na.rm=</span>T),<span class="at">avgLun=</span><span class="fu">mean</span>(Lunch,<span class="at">na.rm =</span> T))</span></code></pre></div>
<pre><code>##   avgSleep avgCourse   avgAge   avgLun
## 1 155.5593  5.016779 19.57383 156.5942</code></pre>
<p>As previously seen, some of these variables are suspiciously high, we can use the median instead of mean to get more informative results:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-wrangling-with-r.html#cb58-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="data-wrangling-with-r.html#cb58-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avgSleep=</span><span class="fu">median</span>(Sleep,<span class="at">na.rm =</span> T),<span class="at">avgCourse=</span><span class="fu">median</span>(Courses,<span class="at">na.rm =</span> T),<span class="at">avgAge=</span><span class="fu">median</span>(Age,<span class="at">na.rm=</span>T),<span class="at">avgLun=</span><span class="fu">median</span>(Lunch,<span class="at">na.rm =</span> T))</span></code></pre></div>
<pre><code>##   avgSleep avgCourse avgAge avgLun
## 1      7.5         5     19      9</code></pre>
</div>
<div id="summarizing-variable-by-groups-1" class="section level3 hasAnchor" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Summarizing Variable by Groups<a href="data-wrangling-with-r.html#summarizing-variable-by-groups-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we want to find the median amount of sleep for 1st, 2nd, 3rd, and 4th years, we can use the ‘group_by()’ function.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-wrangling-with-r.html#cb60-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="data-wrangling-with-r.html#cb60-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Yr) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="data-wrangling-with-r.html#cb60-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">medSleep=</span><span class="fu">median</span>(Sleep,<span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Yr     medSleep
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 First       8  
## 2 Fourth      7  
## 3 Second      7.5
## 4 Third       7</code></pre>
<p>The way we can read the code is:
1. Get the data frame called Data,
2. and then group the observations by Yr,
3. and the find the median amount of sleep by each Yr and store the median in a vector called medSleep</p>
<p>The order of the factor levels is in alphabetical, which isn’t very useful. We can use the ‘mutate()’ function whenever we want to transform or create a new variable. In this case, we are transforming the variable ‘Yr’ by reordering the factor levels with the ‘fct_relevel()’ function:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-wrangling-with-r.html#cb62-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="data-wrangling-with-r.html#cb62-2" tabindex="-1"></a>  <span class="fu">mutate</span>(Yr<span class="ot">&lt;-</span>Yr <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="data-wrangling-with-r.html#cb62-3" tabindex="-1"></a>           <span class="fu">fct_relevel</span>(<span class="fu">c</span>(<span class="st">&quot;First&quot;</span>,<span class="st">&quot;Second&quot;</span>,<span class="st">&quot;Third&quot;</span>,<span class="st">&quot;Fourth&quot;</span>)))</span></code></pre></div>
<p>which reads:
1. Get data frame called ‘Data’,
2. and then transform the variable called ‘Yr’,
3. and then reorder the factor levels</p>
<p>then we use pipes, the ‘group_by()’, and ‘summarize()’ functions like before:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-wrangling-with-r.html#cb63-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="data-wrangling-with-r.html#cb63-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Yr) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="data-wrangling-with-r.html#cb63-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">medSleep=</span><span class="fu">median</span>(Sleep,<span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Yr     medSleep
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 First       8  
## 2 Fourth      7  
## 3 Second      7.5
## 4 Third       7</code></pre>
<p>This output makes a lot more sense for this context.</p>
<p>To summarize a variable on groups formed by more than one variable, we just add the other variables in the ‘group_by()’ function:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-wrangling-with-r.html#cb65-1" tabindex="-1"></a>Data <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="data-wrangling-with-r.html#cb65-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Yr,Comp) <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="data-wrangling-with-r.html#cb65-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">medSleep=</span><span class="fu">median</span>(Sleep,<span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;Yr&#39;.
## You can override using the `.groups`
## argument.</code></pre>
<pre><code>## # A tibble: 9 × 3
## # Groups:   Yr [4]
##   Yr     Comp  medSleep
##   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;
## 1 First  &quot;Mac&quot;     8   
## 2 First  &quot;PC&quot;      7.5 
## 3 Fourth &quot;Mac&quot;     7   
## 4 Fourth &quot;PC&quot;      7.25
## 5 Second &quot;&quot;        7   
## 6 Second &quot;Mac&quot;     7.5 
## 7 Second &quot;PC&quot;      7.5 
## 8 Third  &quot;Mac&quot;     7.5 
## 9 Third  &quot;PC&quot;      7</code></pre>
</div>
<div id="create-a-new-variable-based-on-existing-variables" class="section level3 hasAnchor" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> Create a New Variable Based on Existing Variable(s)<a href="data-wrangling-with-r.html#create-a-new-variable-based-on-existing-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As mentioned previously, the ‘mutate()’ function is used to transform a variable or to create a new variable. There are a few variations on this task, based on the type of variable you want to create, and the type of variable it is based on.</p>
<p><strong>Create a numeric variable based on another numerica variable</strong></p>
<p>The variable ‘Sleep’ is in number of hours. Suppose we need to convert the values of ‘Sleep’ to number of minutes, we can simply perform the following mathematical operation:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-wrangling-with-r.html#cb68-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="data-wrangling-with-r.html#cb68-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sleep_mins=</span>Sleep<span class="sc">*</span><span class="dv">60</span>)</span></code></pre></div>
<p>and store the transformed variable called ‘Sleep_mins’ and add ‘Sleep_mins’ to the data frame called ‘Data’.</p>
<p><strong>Create a binary variable based on a numeric variable</strong></p>
<p>Create binary variable called ‘deprived’. An observation will obtain a value of ‘yes’ if they sleep less than 7 hours a night, and ‘no’ otherwise. We will then add this variable to the data frame called ‘Data’:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-wrangling-with-r.html#cb69-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="data-wrangling-with-r.html#cb69-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">deprived=</span><span class="fu">ifelse</span>(Sleep<span class="sc">&lt;</span><span class="dv">7</span>,<span class="st">&quot;yes&quot;</span>,<span class="st">&quot;no&quot;</span>))</span></code></pre></div>
<p><strong>Create a categorical variable based on a numeric variable</strong></p>
<p>Suppose we want to create a categorical variable based on the number of courses a student takes. We will call this new variable ‘CourseLoad’, which takes on the following variables</p>
<ul>
<li>‘light’ if 3 courses or less</li>
<li>‘regular’ if 4 or 5 courses</li>
<li>‘heavy’ if more than 5 courses</li>
</ul>
<p>and then add ‘CourseLoad to the data frame ’Data’. We can use the ‘case_when()’ function from the ‘dplyr’ package, instead of the ‘cut()’ function:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-wrangling-with-r.html#cb70-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="data-wrangling-with-r.html#cb70-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CourseLoad=</span><span class="fu">case_when</span>(Courses<span class="sc">&lt;=</span><span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;light&quot;</span>,</span>
<span id="cb70-3"><a href="data-wrangling-with-r.html#cb70-3" tabindex="-1"></a>                              Courses<span class="sc">&gt;</span><span class="dv">3</span> <span class="sc">&amp;</span> Courses <span class="sc">&lt;=</span><span class="dv">5</span> <span class="sc">~</span><span class="st">&quot;regular&quot;</span>,</span>
<span id="cb70-4"><a href="data-wrangling-with-r.html#cb70-4" tabindex="-1"></a>                              Courses<span class="sc">&gt;</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;heavy&quot;</span>))</span></code></pre></div>
<p>Note how the category names are suppied after a specific condition is specified.</p>
<p><strong>Collapsing Levels</strong></p>
<p>Sometimes a categorical variable has more levels than needed, so we may want to collapse the levels, as such in this case: collapsing ‘Year’ into upperclassmen and lowerclassmen.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-wrangling-with-r.html#cb71-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="data-wrangling-with-r.html#cb71-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UpUnder=</span><span class="fu">fct_collapse</span>(Yr,<span class="at">under=</span><span class="fu">c</span>(<span class="st">&quot;First&quot;</span>,<span class="st">&quot;Second&quot;</span>),<span class="at">up=</span><span class="fu">c</span>(<span class="st">&quot;Third&quot;</span>,<span class="st">&quot;Fourth&quot;</span>)))</span></code></pre></div>
<p>here we’ve created a new variable called ‘UpUnder’, which is done by collapsing ‘First’ and ‘Second’ into a new factor called ‘under’, and collapsing ‘Third’ and ‘Fourth’ into a new factor called ‘up’. ‘UpUnder’ is also added to the dataframe ‘Data’.</p>
</div>
<div id="combine-data-frames-1" class="section level3 hasAnchor" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> Combine Data Frames<a href="data-wrangling-with-r.html#combine-data-frames-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To combine data frames which have different observations but the same columns, we can combine them using ‘bind_rows()’:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-wrangling-with-r.html#cb72-1" tabindex="-1"></a>dat1<span class="ot">&lt;-</span>Data[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb72-2"><a href="data-wrangling-with-r.html#cb72-2" tabindex="-1"></a>dat3<span class="ot">&lt;-</span>Data[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb72-3"><a href="data-wrangling-with-r.html#cb72-3" tabindex="-1"></a>res.dat2<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(dat1,dat3)</span>
<span id="cb72-4"><a href="data-wrangling-with-r.html#cb72-4" tabindex="-1"></a><span class="fu">head</span>(res.dat2)</span></code></pre></div>
<pre><code>##       Yr Sleep      Sport
## 1 Second     8 Basketball
## 2 Second     7     Tennis
## 3 Second     8     Soccer
## 4  Third     7       None
## 5 Second     7 Basketball
## 6  First     7 Basketball</code></pre>
<p>‘bind_rows()’ works the same way as ‘rbind()’. Likewise, we can use ‘bind_cols()’ instead of ‘cbind()’.</p>
</div>
<div id="sort-data-frame-by-column-values-1" class="section level3 hasAnchor" number="1.2.8">
<h3><span class="header-section-number">1.2.8</span> Sort data frame by column values<a href="data-wrangling-with-r.html#sort-data-frame-by-column-values-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To sort your data frame in ascending order by ‘Age’:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-wrangling-with-r.html#cb74-1" tabindex="-1"></a>Data_by_age<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="data-wrangling-with-r.html#cb74-2" tabindex="-1"></a>  <span class="fu">arrange</span>(Age)</span></code></pre></div>
<p>To sort in descending order by ‘Age’:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-wrangling-with-r.html#cb75-1" tabindex="-1"></a>Data_by_age_des<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="data-wrangling-with-r.html#cb75-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Age))</span></code></pre></div>
<p>To sort in ascending order by ‘Age’ first, then ‘Sleep’:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-wrangling-with-r.html#cb76-1" tabindex="-1"></a>Data_by_age_sleep<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="data-wrangling-with-r.html#cb76-2" tabindex="-1"></a>  <span class="fu">arrange</span>(Age,Sleep)</span></code></pre></div>
</div>
<div id="more-about-combining-datasets" class="section level3 hasAnchor" number="1.2.9">
<h3><span class="header-section-number">1.2.9</span> More About Combining Datasets<a href="data-wrangling-with-r.html#more-about-combining-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-wrangling-with-r.html#cb77-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb77-2"><a href="data-wrangling-with-r.html#cb77-2" tabindex="-1"></a><span class="do">#################</span></span>
<span id="cb77-3"><a href="data-wrangling-with-r.html#cb77-3" tabindex="-1"></a><span class="do">##load packages##</span></span>
<span id="cb77-4"><a href="data-wrangling-with-r.html#cb77-4" tabindex="-1"></a><span class="do">#################</span></span>
<span id="cb77-5"><a href="data-wrangling-with-r.html#cb77-5" tabindex="-1"></a></span>
<span id="cb77-6"><a href="data-wrangling-with-r.html#cb77-6" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb77-7"><a href="data-wrangling-with-r.html#cb77-7" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb77-8"><a href="data-wrangling-with-r.html#cb77-8" tabindex="-1"></a></span>
<span id="cb77-9"><a href="data-wrangling-with-r.html#cb77-9" tabindex="-1"></a><span class="do">##see dataframes from packages</span></span>
<span id="cb77-10"><a href="data-wrangling-with-r.html#cb77-10" tabindex="-1"></a><span class="do">##View(flights)</span></span>
<span id="cb77-11"><a href="data-wrangling-with-r.html#cb77-11" tabindex="-1"></a></span>
<span id="cb77-12"><a href="data-wrangling-with-r.html#cb77-12" tabindex="-1"></a><span class="do">##check documentation</span></span>
<span id="cb77-13"><a href="data-wrangling-with-r.html#cb77-13" tabindex="-1"></a><span class="do">##?flights</span></span>
<span id="cb77-14"><a href="data-wrangling-with-r.html#cb77-14" tabindex="-1"></a></span>
<span id="cb77-15"><a href="data-wrangling-with-r.html#cb77-15" tabindex="-1"></a><span class="do">##View(airlines)</span></span>
<span id="cb77-16"><a href="data-wrangling-with-r.html#cb77-16" tabindex="-1"></a><span class="do">##?airlines</span></span>
<span id="cb77-17"><a href="data-wrangling-with-r.html#cb77-17" tabindex="-1"></a></span>
<span id="cb77-18"><a href="data-wrangling-with-r.html#cb77-18" tabindex="-1"></a><span class="do">##merge data frames that share one column with the same name</span></span>
<span id="cb77-19"><a href="data-wrangling-with-r.html#cb77-19" tabindex="-1"></a>flight_airlines<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb77-20"><a href="data-wrangling-with-r.html#cb77-20" tabindex="-1"></a>  <span class="fu">inner_join</span>(airlines,<span class="at">by=</span><span class="st">&quot;carrier&quot;</span>)</span>
<span id="cb77-21"><a href="data-wrangling-with-r.html#cb77-21" tabindex="-1"></a></span>
<span id="cb77-22"><a href="data-wrangling-with-r.html#cb77-22" tabindex="-1"></a><span class="do">##merge data frames with multiple shared common columns</span></span>
<span id="cb77-23"><a href="data-wrangling-with-r.html#cb77-23" tabindex="-1"></a><span class="do">##View(weather)</span></span>
<span id="cb77-24"><a href="data-wrangling-with-r.html#cb77-24" tabindex="-1"></a>flights_weather<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb77-25"><a href="data-wrangling-with-r.html#cb77-25" tabindex="-1"></a>  <span class="fu">inner_join</span>(weather, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;month&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;hour&quot;</span>,<span class="st">&quot;origin&quot;</span>))</span>
<span id="cb77-26"><a href="data-wrangling-with-r.html#cb77-26" tabindex="-1"></a></span>
<span id="cb77-27"><a href="data-wrangling-with-r.html#cb77-27" tabindex="-1"></a><span class="do">##merge data frames when columns have different names but same content</span></span>
<span id="cb77-28"><a href="data-wrangling-with-r.html#cb77-28" tabindex="-1"></a><span class="do">##View(airports)</span></span>
<span id="cb77-29"><a href="data-wrangling-with-r.html#cb77-29" tabindex="-1"></a>flights_airports<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb77-30"><a href="data-wrangling-with-r.html#cb77-30" tabindex="-1"></a>  <span class="fu">inner_join</span>(airports,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;dest&quot;</span><span class="ot">=</span><span class="st">&quot;faa&quot;</span>))</span>
<span id="cb77-31"><a href="data-wrangling-with-r.html#cb77-31" tabindex="-1"></a></span>
<span id="cb77-32"><a href="data-wrangling-with-r.html#cb77-32" tabindex="-1"></a><span class="do">##similar function in base R, merge()</span></span>
<span id="cb77-33"><a href="data-wrangling-with-r.html#cb77-33" tabindex="-1"></a></span>
<span id="cb77-34"><a href="data-wrangling-with-r.html#cb77-34" tabindex="-1"></a>flight_airlines2<span class="ot">&lt;-</span><span class="fu">merge</span>(flights,airlines, <span class="at">by=</span><span class="st">&quot;carrier&quot;</span>)</span>
<span id="cb77-35"><a href="data-wrangling-with-r.html#cb77-35" tabindex="-1"></a><span class="do">##View(flight_airlines2)</span></span>
<span id="cb77-36"><a href="data-wrangling-with-r.html#cb77-36" tabindex="-1"></a></span>
<span id="cb77-37"><a href="data-wrangling-with-r.html#cb77-37" tabindex="-1"></a>flights_weather2<span class="ot">&lt;-</span><span class="fu">merge</span>(flights,weather, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;month&quot;</span>,<span class="st">&quot;day&quot;</span>,<span class="st">&quot;hour&quot;</span>,<span class="st">&quot;origin&quot;</span>))</span>
<span id="cb77-38"><a href="data-wrangling-with-r.html#cb77-38" tabindex="-1"></a><span class="do">##View(flights_weather2)</span></span>
<span id="cb77-39"><a href="data-wrangling-with-r.html#cb77-39" tabindex="-1"></a></span>
<span id="cb77-40"><a href="data-wrangling-with-r.html#cb77-40" tabindex="-1"></a><span class="do">##not sure if you notice, the merge() function takes longer to run. </span></span>
<span id="cb77-41"><a href="data-wrangling-with-r.html#cb77-41" tabindex="-1"></a><span class="do">##use proc.time() to time how long your code takes to run</span></span>
<span id="cb77-42"><a href="data-wrangling-with-r.html#cb77-42" tabindex="-1"></a></span>
<span id="cb77-43"><a href="data-wrangling-with-r.html#cb77-43" tabindex="-1"></a>begin<span class="ot">&lt;-</span><span class="fu">proc.time</span>()</span>
<span id="cb77-44"><a href="data-wrangling-with-r.html#cb77-44" tabindex="-1"></a>flight_airlines2<span class="ot">&lt;-</span><span class="fu">merge</span>(flights,airlines, <span class="at">by=</span><span class="st">&quot;carrier&quot;</span>)</span>
<span id="cb77-45"><a href="data-wrangling-with-r.html#cb77-45" tabindex="-1"></a><span class="fu">proc.time</span>()<span class="sc">-</span>begin</span></code></pre></div>
<pre><code>##    user  system elapsed 
##    2.41    0.02    2.61</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-wrangling-with-r.html#cb79-1" tabindex="-1"></a>begin<span class="ot">&lt;-</span><span class="fu">proc.time</span>()</span>
<span id="cb79-2"><a href="data-wrangling-with-r.html#cb79-2" tabindex="-1"></a>flight_airlines<span class="ot">&lt;-</span>flights<span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="data-wrangling-with-r.html#cb79-3" tabindex="-1"></a>  <span class="fu">inner_join</span>(airlines,<span class="at">by=</span><span class="st">&quot;carrier&quot;</span>)</span>
<span id="cb79-4"><a href="data-wrangling-with-r.html#cb79-4" tabindex="-1"></a><span class="fu">proc.time</span>()<span class="sc">-</span>begin</span></code></pre></div>
<pre><code>##    user  system elapsed 
##    0.05    0.01    0.11</code></pre>
<p>Basically, use innerjoin rather than merge because it’s an order of magnitude faster</p>
</div>
<div id="a-note-about-missing-values" class="section level3 hasAnchor" number="1.2.10">
<h3><span class="header-section-number">1.2.10</span> A Note About Missing Values<a href="data-wrangling-with-r.html#a-note-about-missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s go over some standard missing values that R recognizes and how to handle nonstandard ones that R will not recognize</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-wrangling-with-r.html#cb81-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb81-2"><a href="data-wrangling-with-r.html#cb81-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb81-3"><a href="data-wrangling-with-r.html#cb81-3" tabindex="-1"></a>Data<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;datasets/missing.csv&quot;</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb81-4"><a href="data-wrangling-with-r.html#cb81-4" tabindex="-1"></a>Data</span></code></pre></div>
<pre><code>##   Height Weight
## 1     62    135
## 2     66    190
## 3     70    230
## 4     65    130
## 5     NA    260
## 6    NaN    250
## 7     70       
## 8     72     na
## 9     63    N/A</code></pre>
<p>Some of these observations are missing values</p>
<p>We can apply is.na() to dataframe to see which entries are viewed as missing:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-wrangling-with-r.html#cb83-1" tabindex="-1"></a><span class="fu">is.na</span>(Data)</span></code></pre></div>
<pre><code>##       Height Weight
##  [1,]  FALSE  FALSE
##  [2,]  FALSE  FALSE
##  [3,]  FALSE  FALSE
##  [4,]  FALSE  FALSE
##  [5,]   TRUE  FALSE
##  [6,]   TRUE  FALSE
##  [7,]  FALSE  FALSE
##  [8,]  FALSE  FALSE
##  [9,]  FALSE  FALSE</code></pre>
<p>As we can see, R only recognized entries with NA and NaN as missing. These are the standard values for missing entries. Any other way is not recognized.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>NaN represents undefined number</li>
<li>NA represents missing value</li>
</ul>
<p>We can convert the non standard missing values to 'standard missing values' using the ‘replace()’ function within the ‘mutate()’ function:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-wrangling-with-r.html#cb85-1" tabindex="-1"></a>Data<span class="ot">&lt;-</span>Data <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="data-wrangling-with-r.html#cb85-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> <span class="fu">replace</span>(Weight, Weight <span class="sc">==</span> <span class="st">&quot;na&quot;</span>, <span class="cn">NA</span>))<span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="data-wrangling-with-r.html#cb85-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> <span class="fu">replace</span>(Weight, Weight <span class="sc">==</span> <span class="st">&quot;N/A&quot;</span>, <span class="cn">NA</span>))<span class="sc">%&gt;%</span></span>
<span id="cb85-4"><a href="data-wrangling-with-r.html#cb85-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> <span class="fu">replace</span>(Weight, Weight <span class="sc">==</span> <span class="st">&quot;&quot;</span>, <span class="cn">NA</span>))</span>
<span id="cb85-5"><a href="data-wrangling-with-r.html#cb85-5" tabindex="-1"></a></span>
<span id="cb85-6"><a href="data-wrangling-with-r.html#cb85-6" tabindex="-1"></a><span class="fu">is.na</span>(Data)</span></code></pre></div>
<pre><code>##       Height Weight
##  [1,]  FALSE  FALSE
##  [2,]  FALSE  FALSE
##  [3,]  FALSE  FALSE
##  [4,]  FALSE  FALSE
##  [5,]   TRUE  FALSE
##  [6,]   TRUE  FALSE
##  [7,]  FALSE   TRUE
##  [8,]  FALSE   TRUE
##  [9,]  FALSE   TRUE</code></pre>
<p>And just like that, the rest of the missing values are recognized as missing as they should be.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="syllabus-week.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-visualization-with-r-using-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-mod1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
